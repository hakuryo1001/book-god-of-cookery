% -----------------------------------------------------------------------------
% Cover preamble: imports shared fonts/ruby/jyutcitzi. No \documentclass.
% Include this from outer-cover-template.tex (after ctex). Main book uses preamble/main.tex.
% -----------------------------------------------------------------------------

\usepackage{ctex}
% Shared preamble (fonts, \jcz, \ruby, CJK). Path works from template dir or project root.
\IfFileExists{../preamble/fonts-and-ruby.tex}{%
  \input{../preamble/fonts-and-ruby.tex}%
}{%
  \input{preamble/fonts-and-ruby.tex}%
}
% Cover build often has CWD = this folder; shared file may have used project-root paths.
% Reload Jyutcitzi so cover finds fonts/ when built from "cover-template 6x9 in/".
\IfFileExists{../fonts/JyutcitziWithSourceHanSerifTCRegular.ttf}{%
  \newfontfamily{\jcz}{JyutcitziWithSourceHanSerifTCRegular}[Path = ../fonts/, Extension = .ttf]%
  \newfontfamily{\jczPMingLiU}{JyutcitziWithPMingLiURegular}[Path = ../fonts/, Extension = .ttf]%
}{%
  \IfFileExists{fonts/JyutcitziWithSourceHanSerifTCRegular.ttf}{%
    \newfontfamily{\jcz}{JyutcitziWithSourceHanSerifTCRegular}[Path = fonts/, Extension = .ttf]%
    \newfontfamily{\jczPMingLiU}{JyutcitziWithPMingLiURegular}[Path = fonts/, Extension = .ttf]%
  }{}%
}
% Cover: ruby readings in Jyutcitzi so PUA displays
\renewcommand{\ruby}[2]{\origRuby{#1}{\jcz{\rubyfont #2}}}
